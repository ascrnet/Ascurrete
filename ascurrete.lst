mads 2.0.6 build 58 (28 Jan 17)
Source: C:\Users\dogdark\Documents\atari\Ascurrete\ascurrete.asm
     1 				;INCLUIMOS LIBRERIAS ANEXAS
     2 					ICL 'BASE/SYS_EQUATES.M65'
Source: C:\Users\dogdark\Documents\atari\Ascurrete\BASE\SYS_EQUATES.M65
     1 				;================================================================================
     2 				; System equates, Atari XL + mads [NRV 2009]
     3 				;================================================================================
     4
     5 				;----------------------------------------
     6 				; GTIA:
     7 				;----------------------------------------
     8
     9 = D000			M0PF	= $D000  ; read only
    10 = D001			M1PF	= $D001  ; read only
    11 = D002			M2PF	= $D002  ; read only
    12 = D003			M3PF	= $D003  ; read only
    13
    14 = D004			P0PF	= $D004  ; read only
    15 = D005			P1PF	= $D005  ; read only
    16 = D006			P2PF	= $D006  ; read only
    17 = D007			P3PF	= $D007  ; read only
    18
    19 = D008			M0PL	= $D008  ; read only
    20 = D009			M1PL	= $D009  ; read only
    21 = D00A			M2PL	= $D00A  ; read only
    22 = D00B			M3PL	= $D00B  ; read only
    23
    24 = D00C			P0PL	= $D00C  ; read only
    25 = D00D			P1PL	= $D00D  ; read only
    26 = D00E			P2PL	= $D00E  ; read only
    27 = D00F			P3PL	= $D00F  ; read only
    28
    29 = D010			TRIG0	= $D010  ; read only
    30 = D011			TRIG1	= $D011  ; read only
    31 = D012			TRIG2	= $D012  ; read only
    32 = D013			TRIG3	= $D013  ; read only
    33
    34 = D014			PAL		= $D014  ; read only
    35
    36 				; positions for normal screen: 48 left (+160)--> 208 right (or 32-->224 for wide playfield)
    37 				; 32 top (+192)--> 224 bottom (or 16-->112 for double line resolution)
    38 = D000			HPOSP0	= $D000  ; write only
    39 = D001			HPOSP1	= $D001  ; write only
    40 = D002			HPOSP2	= $D002  ; write only
    41 = D003			HPOSP3	= $D003  ; write only
    42
    43 = D004			HPOSM0	= $D004  ; write only
    44 = D005			HPOSM1	= $D005  ; write only
    45 = D006			HPOSM2	= $D006  ; write only
    46 = D007			HPOSM3	= $D007  ; write only
    47
    48 				; 0 (or 2) normal width, 1 double width, 4 quadruple width
    49 = D008			SIZEP0	= $D008  ; write only
    50 = D009			SIZEP1	= $D009  ; write only
    51 = D00A			SIZEP2	= $D00A  ; write only
    52 = D00B			SIZEP3	= $D00B  ; write only
    53
    54 = D00C			SIZEM	= $D00C  ; write only		// the same 2 bits as the players, but in one byte, in this order: m3m2m1m0
    55
    56 = D00D			GRAFP0	= $D00D  ; write only
    57 = D00E			GRAFP1	= $D00E  ; write only
    58 = D00F			GRAFP2	= $D00F  ; write only
    59 = D010			GRAFP3	= $D010  ; write only
    60
    61 = D011			GRAFM	= $D011  ; write only		// 4 missiles in this order: m3m2m1m0
    62
    63 = D012			COLPM0	= $D012  ; write only
    64 = D013			COLPM1	= $D013  ; write only
    65 = D014			COLPM2	= $D014  ; write only
    66 = D015			COLPM3	= $D015  ; write only
    67
    68 = D016			COLPF0	= $D016  ; write only
    69 = D017			COLPF1	= $D017  ; write only
    70 = D018			COLPF2	= $D018  ; write only
    71 = D019			COLPF3	= $D019  ; write only
    72
    73 = D01A			COLBK	= $D01A  ; write only
    74
    75 = D01B			PRIOR	= $D01B  ; write only
    76 = D01C			VDELAY	= $D01C  ; write only
    77 = D01D			GRACTL	= $D01D  ; write only
    78 = D01E			HITCLR	= $D01E  ; write only
    79
    80 = D01F			CONSOL	= $D01F  ; read and write
    81
    82 				;----------------------------------------
    83 				; POKEY:
    84 				;----------------------------------------
    85
    86 = D200			POT0	= $D200  ; read only
    87 = D201			POT1	= $D201  ; read only
    88 = D202			POT2	= $D202  ; read only
    89 = D203			POT3	= $D203  ; read only
    90 = D204			POT4	= $D204  ; read only
    91 = D205			POT5	= $D205  ; read only
    92 = D206			POT6	= $D206  ; read only
    93 = D207			POT7	= $D207  ; read only
    94
    95 = D208			ALLPOT	= $D208  ; read only
    96
    97 = D209			KBCODE	= $D209  ; read only
    98 = D20A			RANDOM	= $D20A  ; read only
    99
   100 = D20D			SERIN	= $D20D  ; read only
   101 = D20E			IRQST	= $D20E  ; read only
   102 = D20F			SKSTAT	= $D20F  ; read only
   103
   104
   105 = D200			AUDF1	= $D200  ; write only
   106 = D201			AUDC1	= $D201  ; write only
   107 = D202			AUDF2	= $D202  ; write only
   108 = D203			AUDC2	= $D203  ; write only
   109 = D204			AUDF3	= $D204  ; write only
   110 = D205			AUDC3	= $D205  ; write only
   111 = D206			AUDF4	= $D206  ; write only
   112 = D207			AUDC4	= $D207  ; write only
   113
   114 = D208			AUDCTL	= $D208  ; write only
   115
   116 = D209			STIMER	= $D209  ; write only
   117 = D20A			SKREST	= $D20A  ; write only
   118 = D20B			POTGO	= $D20B  ; write only
   119
   120 = D20D			SEROUT	= $D20D  ; write only
   121 = D20E			IRQEN	= $D20E  ; write only
   122 = D20F			SKCTL	= $D20F  ; write only
   123
   124 				;----------------------------------------
   125 				; PIA:
   126 				;----------------------------------------
   127
   128 = D300			PORTA	= $D300  ; read and write
   129 = D301			PORTB	= $D301  ; read and write
   130 = D302			PACTL	= $D302  ; read and write
   131 = D303			PBCTL	= $D303  ; read and write
   132
   133 				;----------------------------------------
   134 				; ANTIC:
   135 				;----------------------------------------
   136
   137 = D40B			VCOUNT	= $D40B  ; read only
   138
   139 = D40C			PENH	= $D40C  ; read only
   140 = D40D			PENV	= $D40D  ; read only
   141
   142 = D40F			NMIST	= $D40F  ; read only
   143
   144
   145 = D400			DMACTL	= $D400  ; write only
   146 = D401			CHACTL	= $D401  ; write only
   147 = D402			DLISTL	= $D402  ; write only
   148 = D403			DLISTH	= $D403  ; write only
   149 = D404			HSCROL	= $D404  ; write only
   150 = D405			VSCROL	= $D405  ; write only
   151 = D407			PMBASE	= $D407  ; write only
   152 = D409			CHBASE	= $D409  ; write only
   153 = D40A			WSYNC	= $D40A  ; write only
   154 = D40E			NMIEN	= $D40E  ; write only
   155 = D40F			NMIRES	= $D40F  ; write only
   156
   157 				;----------------------------------------
   158 				; Shadow registers:
   159 				;----------------------------------------
   160
   161 = 022F			SDMCTL	= $22f	; shadow of DMACTL
   162 = 026F			GPRIOR	= $26f	; shadow of PRIOR
   163
   164 = 02C0			PCOLR0	= $2c0	; shadow of COLPM0
   165 = 02C1			PCOLR1  = $2c1
   166 = 02C2			PCOLR2  = $2c2
   167 = 02C3			PCOLR3  = $2c3
   168 = 02C4			COLOR0	= $2c4	; shadow of COLPF0
   169 = 02C5			COLOR1  = $2c5
   170 = 02C6			COLOR2  = $2c6
   171 = 02C7			COLOR3  = $2c7
   172 = 02C8			COLOR4  = $2C8
   173
   174 = 0014			RTCLOCK	= 20
   175 = 004D			ATRACT	= 77
   176
   177 = 02F4			CHBAS	= 756	; shadow of CHBASE
   178 = 02FC			CH		= 764
   179 = 02F3			CHACT	= 755
   180 = 03F8			BASICF  = $3f8
   181 = 03FA			GINTLK  = $3fa
   182
   183
   184 = 0230			SDLSTL	= $230	; display list address
   185 = 0200			VDSLST	= $200	; DLI address
   186
   187 = 0270			PADDL0	= 624	; 0-228 , shadow of POT0
   188 = 027C			PTRIG0	= 636	; 0 = PRESSED , shadow of PTRG0
   189 = 0278			STICK0	= 632	; 0000 = RLDU , shadow of PORTA
   190 = 0284			STRIG0	= 644	; 0 = PRESSED , shadow of TRIG0
   191
   192 = 0244			COLDST	= 580	; non zero --> do a cold start when pressing the reset key
   193
   194 				;----------------------------------------
   195 				; VBI:
   196 				;----------------------------------------
   197
   198 = E45C			SETVBV			= $E45C
   199 = E45F			XITVB_I			= $E45F
   200 = E45F			SYSVBV			= $E45F
   201 = E462			XITVB_D			= $E462
   202 = E462			XITVBV			= $E462
   203 = 0006			VBI_I			= 6
   204 = 0007			VBI_D			= 7
   205 = C0E2			NORMAL_VBI_I	= 49378
   206 = C28A			NORMAL_VBI_D	= 49802
   207 = 0222			VVBLKI			= 546
   208 = 0224			VVBLKD			= 548
   209 = E462			XITVB			= XITVB_D
   210
   211 				;----------------------------------------
   212 				; Handler vectors:
   213 				;----------------------------------------
   214
   215 = FFFA			NMIH_VECTOR		= 65530
   216 = FFFC			RESH_VECTOR		= 65532
   217 = FFFE			IRQH_VECTOR		= 65534
   218
   219 				;----------------------------------------
   220 				; Generic values
   221 				;----------------------------------------
   222
   223 = 02E0			RUNAD  = $02E0
   224 = 02E2			INITAD = $02E2
   225
   226 				;----------------------------------------
   227 				; I/O:
   228 				;----------------------------------------
   229
   230 = E456			CIOV			= $E456	; (58454)
   231 = E459			SIOV			= $E459	; (58457)
   232
   233 				;----------------------------------------
   234 				; Bit values:
   235 				;----------------------------------------
   236
   237 				; DMA values
   238 = 0020			DV_DMA_ON			= %00100000
   239 = 0010			DV_PM_ONE_LINE		= %00010000
   240 = 0008			DV_PLAYERS_ON		= %00001000
   241 = 0004			DV_MISSILES_ON		= %00000100
   242 = 0003			DV_WIDE_PF			= %00000011
   243 = 0002			DV_NORMAL_PF		= %00000010
   244 = 0001			DV_NARROW_PF		= %00000001
   245
   246 				; Display list values
   247 = 0080			DL_DLI_MASK		= %10000000
   248 = 0040			DL_LMS_MASK		= %01000000
   249 = 0020			DL_VSCROLL_MASK	= %00100000
   250 = 0010			DL_HSCROLL_MASK	= %00010000
   251
   252 = 0001			DL_JMP		= 1
   253 = 0041			DL_JVB		= 65
   254
   255 = 0000			DL_BLANK_1	= 0
   256 = 0010			DL_BLANK_2	= 16
   257 = 0020			DL_BLANK_3	= 32
   258 = 0030			DL_BLANK_4	= 48
   259 = 0040			DL_BLANK_5	= 64
   260 = 0050			DL_BLANK_6	= 80
   261 = 0060			DL_BLANK_7	= 96
   262 = 0070			DL_BLANK_8	= 112
   263
   264 				; Antic graphic modes
   265 = 0002			GM_CHAR_A2	= 2			; 2 colors, 40x24, 960b, 40xline, 8 scanlines
   266 = 0006			GM_CHAR_A6	= 6			; 4 colors, 20x24, 480b, 40xline, 8 scanlines
   267 = 0007			GM_CHAR_A7	= 7			; 4 colors, 20x12, 240b, 20xline, 16 scanlines
   268 = 0004			GM_CHAR_A4	= 4			; 5 colors, 40x24, 960b, 40xline, 8 scanlines
   269 = 0005			GM_CHAR_A5	= 5			; 5 colors, 40x12, 480b, 40xline, 16 scanlines
   270 = 0003			GM_CHAR_A3	= 3			; 2 colors, 40x24, 760b, 40xline, 10 scanlines
   271
   272 				; Basic graphic modes
   273 = 0002			GM_CHAR_G0	= 2			; 2 colors, 40x24, 960b, 40xline, 8 scanlines
   274 = 0006			GM_CHAR_G1	= 6			; 4 colors, 20x24, 480b, 40xline, 8 scanlines
   275 = 0007			GM_CHAR_G2	= 7			; 4 colors, 20x12, 240b, 20xline, 16 scanlines
   276 = 0004			GM_CHAR_G12	= 4			; 5 colors, 40x24, 960b, 40xline, 8 scanlines
   277 = 0005			GM_CHAR_G13	= 5			; 5 colors, 40x12, 480b, 40xline, 16 scanlines
   278
   279 = 0008			GM_PIXEL_G3	= 8			; 4 colors, 40x24, 240b, 10xline, 8 scanline
   280 = 0009			GM_PIXEL_G4	= 9			; 2 colors, 80x48, 480b, 10xline, 4 scanline
   281 = 000A			GM_PIXEL_G5	= 10		; 4 colors, 80x48, 960b, 20xline, 4 scanline
   282 = 000B			GM_PIXEL_G6	= 11		; 2 colors, 160x96, 1920b, 20xline, 2 scanline
   283 = 000D			GM_PIXEL_G7	= 13		; 4 colors, 160x96, 3840b, 40xline, 2 scanline
   284 = 000F			GM_PIXEL_G8	= 15		; 2 colors, 320x192, 7680b, 40xline, 1 scanline
   285 = 000C			GM_PIXEL_G14	= 12	; 2 colors, 160x192, 3840b, 20xline, 1 scanline
   286 = 000E			GM_PIXEL_G15	= 14	; 4 colors, 160x192, 7680b, 40xline, 1 scanline
   287
   288 = 000F			GM_PIXEL_G9	= 15		; 1 color, 80x192, 7680b, 40xline, 1 scanline
   289 = 000F			GM_PIXEL_G10	= 15	; 9 colors, 80x192, 7680b, 40xline, 1 scanline
   290 = 000F			GM_PIXEL_G11	= 15	; 16 colors, 80x192, 7680b, 40xline, 1 scanline
   291
   292 				; Prior values
   293 = 0001			PRV_PM_PRIORITY_1	= %00000001		; p0 p1 p2 p3 / pf0 pf1 pf2 pf3 (p5) / bk
   294 = 0002			PRV_PM_PRIORITY_2	= %00000010		; p0 p1 / pf0 pf1 pf2 pf3 (p5) / p2 p3 / bk
   295 = 0004			PRV_PM_PRIORITY_3	= %00000100		; pf0 pf1 pf2 pf3 (p5) /  p0 p1 p2 p3 / bk
   296 = 0008			PRV_PM_PRIORITY_4	= %00001000		; pf1 pf2 /  p0 p1 p2 p3 / pf0 pf3 (p5) / bk
   297 = 0010			PRV_FIFTH_PLAYER	= %00010000
   298 = 0020			PRV_PM_OVERLAP		= %00100000
   299 = 0040			PRV_GTIA_9			= %01000000
   300 = 0080			PRV_GTIA_10			= %10000000
   301 = 00C0			PRV_GTIA_11			= %11000000
   302
   303 				; Gractl values
   304 = 0001			GCTL_MISSILES		= %001
   305 = 0002			GCTL_PLAYERS		= %010
   306 = 0004			GCTL_LATCH_TRIGGERS	= %100
   307
   308 				; Consol values:
   309 = 0001			CNV_START_MASK		= %001
   310 = 0002			CNV_OPTION_MASK		= %010
   311 = 0004			CNV_SELECT_MASK		= %100
   312
   313 				; Stick values:
   314 = 0008			STV_RIGHT_MASK		= %1000
   315 = 0004			STV_LEFT_MASK		= %0100
   316 = 0002			STV_DOWN_MASK		= %0010
   317 = 0001			STV_UP_MASK			= %0001
   318
   319 = 0008			STICK_MASK_RIGHT	= %1000
   320 = 0004			STICK_MASK_LEFT		= %0100
   321 = 0002			STICK_MASK_DOWN		= %0010
   322 = 0001			STICK_MASK_UP		= %0001
   323
   324 = 0007			STICK_VALUE_RIGHT	= %0111
   325 = 000B			STICK_VALUE_LEFT	= %1011
   326 = 000D			STICK_VALUE_DOWN	= %1101
   327 = 000E			STICK_VALUE_UP		= %1110
   328
   329 				/*
   330 				KBCode Hexadecimal Values
   331 				 	$00	$01	$02	$03	$04	$05	$06	$07	$08	$09	$0A	$0B	$0C	$0D	$0E	$0F
   332 				$00	L	J	;	F1	F2	K	+	*	O	 	P	U	CR	I	-	=
   333 				$10	V	Hlp	C	F3	F4	B	X	Z	4	 	3	6	Esc	5	2	1
   334 				$20	,	Spc	.	N	 	M	/	Inv	R	 	E	Y	Tab	T	W	Q
   335 				$30	9	 	0	7	BS	8	<	>	F	H	D	 	Cap	G	S	A
   336
   337 				together with Shift Key: add +$40
   338 				together with Control key: add +$80 
   339 				*/
   339
   340
   341 				/*
   342 				OS VARIABLES FOR XL/XE
   343 				*/
   343
   344 = 006A			RAMTOP	= $006A
   345 = 002D			ICAX4Z	= $2D
   346 = 006C			BUFSTR	= $6C
   347 = 0050			TEMP	= $50
   348 = 0002			CASINI	= $02
   349 = 0004			RAMLO	= $04
   350 = 0009			BOOT	= $09
   351 = 000C			DOSINI	= $0C
   352 = 0008			WARMST	= $08
   353 = E474			WARMSV	= $E474
   354 = 0300			DDEVIC	= $0300
     3 				    org $2000
     4
     5 				inicio
     6 				;COLOR FONDO
     7 FFFF> 2000-2017> A9 02 + 	MWA #$02 COLOR2
     8 200A A9 02 8D C8 02		MVA #$02 COLOR4
     9 				;BORRO CURSOR
    10 200F A9 00			LDA #$00
    11 2011 A0 02			LDY #$02
    12 2013 91 58			STA ($58),Y
    13 				;BUCLE
    14 2015 4C 15 20		    jmp *
    15
    16 02E0-02E1> 00 20		    run inicio
